많이 쓰이는 분석 프레임 4가지
1. 퍼널 분석
    - 어느 단계에 집중해서 개선해야할까
    - 고객을 목표지점까지 잘 데려오고 꾸준히 상품을 쓰고 있는가
2. 코호트 분석
    - 시간이 흐르면서 고객은 어떻게 바뀌고 있는지
3. 리텐션 분석
    - 꾸준히 상품을 잘 쓰고 있는지 리텐션으로 확인
4. RFM 분석
    - 고객 행동에 기반한 분할(segmentation) 방법

### 퍼널분석: 목표까지의 고객 여정을 단계별로 나눠 단계별 전환과 이탈을 측정하는 분석
ex)
  - 이커머스: 구매 전환
     - 메인페이지 > 상품 상세페이지 > 장바구니 담기 > 결제 > 결제완료
  - 넷플릭스: 정기구독 전환
     - 회원가입 > 1개월 무료 사용 > 콘텐츠 시청 > 정기구독 결제
  - B2B 영업: 계약 체결
     - 콜드콜 > 메일제안 > 미팅 > 실무자 논의 > 의사결정사 심사 > 계약 체결

퍼널분석하면 아래와 같이 알 수 있다:
1. 어디가 문제인지, 어디에 집중해서 우리 서비스를 개선해야하는지 알 수 있다
2. 그룹별 퍼널 비교를 통해 우수한 퍼널을 보이는 그룹을 찾고 이에 맞는 액션이 가능하다
3. 퍼널에서 이탈하는 고객들의 이후 행동을 통해 개선 포인트 도출

### 퍼널분석을 업무에 적용하기

STEP1. 최종 목표, 비즈니스에서 가장 중요한 메트릭 정의하기(예: 이커머스 -> 구매, SNS -> 가입, 데일리 액티브 유저)

STEP2. 목표까지의 단계, 시나리로 만들어보기

하지만, 고객 여정이 선형적이지 않은 경우가 많다, 잘못되는 전환율을 구하는 경우를 피하기 위해 퍼널 상에서는 공통적으로 적용되는 핵심 단계만 정의한다
만약, 검색 기능이 핵심 기능이라고 한다면, 메인페이지 > 검색 > 상품 상세 > 장바구니 > 구매로 핵심단계를 설정할 수 있다

STEP3. 전환율 기준 정하기
   - 퍼널의 단계별 전환에 대한 기간 기준
   - 카운트 기준: 클릭스 vs unique 유저수

STEP4. 전환율 산출하기(가설에 따라 세그먼트로 나눠서 비교하기)
   - 기간: 실험 전/후, 월별
   - 유저속성: 신규/재구매, 성별, 연령대
   - 유입경로: 유입 채널별

STEP5. A/B 테스트로 지표 개선해가기
   - 비효율적인 단계를 찾아 A/B 테스트로 개선하는 것이 퍼널분석의 이유


```sql
select count(distinct user_id) unique_user from data.funnel_data
select distinct device from data.funnel_data
select distinct page from data.funnel_data
```

```sql
select page, device, count(user_id) user_count, count(distinct user_id) check_user_count
from data.funnel_data
group by page, device
order by page
```

